{"version":3,"file":"commonHelpers.js","sources":["../src/img/icons.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__0c78aa03__\"","'use strict';\n\n// imports\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport './css/simple-light-box-modal.css';\nimport iconsPath from './img/icons.svg';\n\nimport axios from 'axios';\n\n// variables\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\n\nconst gallery = document.querySelector('.gallery');\n\nconst API_KEY = '41640115-31701c1b62cbb4a16b6499d34';\nconst API_URL = 'https://pixabay.com/api/';\n\n// spinner\n\nconst loader = document.querySelector('.loader');\nconst showLoader = () => loader.classList.add('active');\nconst hideLoader = () => loader.classList.remove('active');\n\n// markup foo -> renderImg()\n\nconst renderImg = hits => {\n  const markup = hits\n    .map(\n      hit => `\n              <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=${hit.largeImageURL}>\n                    <img\n                      class=\"gallery-image\"\n                      src=${hit.webformatURL}\n                      alt=\"${hit.tags}\"\n                    />\n                  \n                  <div class=\"img-info-wrapper\">\n                    <div class=\"img-part-info-wrapper\">\n                    <h3 class=\"img-info-title\">Likes</h3>\n                      <p class=\"img-info\">${hit.likes}</p>\n                    </div>\n  \n                    <div class=\"img-part-info-wrapper\">\n                    <h3 class=\"img-info-title\">Views</h3>\n                      <p class=\"img-info\">${hit.views}</p>\n                    </div>\n  \n                    <div class=\"img-part-info-wrapper\">\n                    <h3 class=\"img-info-title\">Comments</h3>\n                      <p class=\"img-info\">${hit.comments}</p>\n                    </div>\n  \n                    <div class=\"img-part-info-wrapper\">\n                    <h3 class=\"img-info-title\">Downloads</h3>\n                      <p class=\"img-info\">${hit.downloads}</p>\n                    </div>\n                  </div>\n              </a>\n            </li>\n            `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\n// search Img\n\nconst searchImg = async () => {\n  const inputText = localStorage.getItem('userInput') || '';\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: `${inputText}`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  });\n\n  const url = `${API_URL}?${params}`;\n\n  showLoader();\n\n  try {\n    const response = await axios.get(url);\n    const { hits } = response.data;\n    totalPages = Math.ceil(response.data.totalHits / perPage);\n    hideLoader();\n\n    if (hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n      renderImg(hits);\n    }\n\n    let lightbox = new SimpleLightbox('.gallery a', {\n      captionDelay: 250,\n      captionType: 'attr',\n      captionsData: 'alt',\n      navText: [\n        `<svg\n              class=\"lightbox-button-icon-prev gallery-arrow\"\n              width=\"24\"\n              height=\"24\"\n              aria-label=\"icon arrow left\">\n            <use href=\"${iconsPath}#icon-arrow-left\"></use>\n        </svg>`,\n        `<svg\n              class=\"lightbox-button-icon-next gallery-arrow\"\n              width=\"24\"\n              height=\"24\"\n              aria-label=\"icon arrow right\">\n            <use href=\"${iconsPath}#icon-arrow-right\"></use>\n        </svg>`,\n      ],\n      closeText: `<svg\n              class=\"lightbox-close-icon\"\n              width=\"32\"\n              height=\"32\">\n            <use href=\"${iconsPath}#icon-close\"></use>\n      </svg>`,\n    });\n\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n    hideLoader();\n  }\n};\n\n// load more btn - pagination -> fetchImg()\n\nlet page = 1;\nlet perPage = 40;\nlet totalPages;\n\nconst fetchImg = async () => {\n  if (page >= totalPages) {\n    loadBtn.classList.add('inactive');\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n\n  try {\n    showLoader();\n    await searchImg();\n    page += 1;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst loadBtn = document.querySelector('.load-more-btn');\nloadBtn.classList.add('inactive');\n\nloadBtn.addEventListener('click', async () => {\n  await fetchImg();\n  fetchNextGroup();\n});\n\n// load more - save user request field\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  try {\n    localStorage.setItem('userInput', input.value);\n    page = 1;\n    await searchImg();\n  } catch (error) {\n    console.error('LocalStorage error:', error.message);\n  }\n});\n\n// Scroll\n\nconst fetchNextGroup = () => {\n  const galleryCard = document.querySelector('.gallery-item');\n  const galleryCardSize = galleryCard.getBoundingClientRect();\n\n  console.log(galleryCardSize);\n  window.scrollBy({\n    top: galleryCardSize.height * 2,\n    behavior: 'smooth',\n  });\n};\n\n// ******************  MAIN FOO - submit handler  ******************\n\nconst submitHandler = async e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  page = 1;\n\n  try {\n    await searchImg();\n  } catch (error) {\n    console.log(error);\n  }\n\n  form.reset();\n  loadBtn.classList.remove('inactive');\n};\n\nform.addEventListener('submit', submitHandler);\n"],"names":["iconsPath","form","input","gallery","API_KEY","API_URL","loader","showLoader","hideLoader","renderImg","hits","markup","hit","searchImg","inputText","params","page","perPage","url","response","axios","totalPages","iziToast","SimpleLightbox","error","fetchImg","loadBtn","fetchNextGroup","e","galleryCardSize","submitHandler"],"mappings":"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"}